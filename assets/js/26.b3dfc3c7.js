(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{388:function(t,e,a){"use strict";a.r(e);var s=a(42),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"transaction-accounting-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transaction-accounting-model"}},[t._v("#")]),t._v(" Transaction Accounting Model")]),t._v(" "),a("p",[t._v("Crypto.com Chain uses both Unspent Transaction Outputs (UTXOs) and (a form of) accounts for its accounting model, inspired by the work on "),a("a",{attrs:{href:"https://eprint.iacr.org/2018/262.pdf",target:"_blank",rel:"noopener noreferrer"}},[t._v("chimeric ledgers"),a("OutboundLink")],1),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[t._v("#")]),t._v(" Motivation")]),t._v(" "),a("p",[t._v("The native token used in Crypto.com Chain serves two main purposes:")]),t._v(" "),a("ol",[a("li",[t._v("Payments")]),t._v(" "),a("li",[t._v("Network operation (staking etc.)")])]),t._v(" "),a("p",[t._v("These two realms have different rules and properties. These differences are highlighted in the table below:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th"),t._v(" "),a("th",[t._v("Transaction Volume")]),t._v(" "),a("th",[t._v("Visibility")]),t._v(" "),a("th",[t._v("State Changes")]),t._v(" "),a("th",[t._v("Value Transfer Rules")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Payments")]),t._v(" "),a("td",[t._v("High")]),t._v(" "),a("td",[t._v("Minimal / confidentiality / data protection is desired")]),t._v(" "),a("td",[t._v("UTXO set is the only “state”: changes only by transactions")]),t._v(" "),a("td",[t._v("Flexible: new address per invoice, ad-hoc n-of-m address formations (e.g. for escrows); encoding extra information for atomic swaps etc.")])]),t._v(" "),a("tr",[a("td",[t._v("Network operation (staking etc.)")]),t._v(" "),a("td",[t._v("Low")]),t._v(" "),a("td",[t._v("Maximal transparency is desired")]),t._v(" "),a("td",[t._v("Both by transactions and network events (e.g. a validator not following the protocol)")]),t._v(" "),a("td",[t._v("Self-contained: same account changes (reward payouts, unbonding…)")])])])]),t._v(" "),a("h2",{attrs:{id:"utxo-accounts-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utxo-accounts-model"}},[t._v("#")]),t._v(" UTXO+Accounts model")]),t._v(" "),a("p",[t._v("For this reason, we chose the mixed model where:")]),t._v(" "),a("ul",[a("li",[t._v("UTXO is used for payments / value transfers")]),t._v(" "),a("li",[t._v("Account-model is used for network operations (“staked state”)")])]),t._v(" "),a("p",[t._v("Different types of transactions and how they relate to these accounting are "),a("a",{attrs:{href:"./transaction"}},[t._v("described in transactions")]),t._v(".")]),t._v(" "),a("h3",{attrs:{id:"staked-state"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#staked-state"}},[t._v("#")]),t._v(" Staked state")]),t._v(" "),a("p",[t._v("The current account usage is self-contained limited. Each account (“staked state”) contains two balances:")]),t._v(" "),a("ul",[a("li",[t._v("bonded amount")]),t._v(" "),a("li",[t._v("unbonded amount")])]),t._v(" "),a("p",[t._v("and its slashing related information.")]),t._v(" "),a("p",[t._v("For example, by using "),a("RouterLink",{attrs:{to:"/wallets/client-cli.html#staking-operations"}},[t._v("client-cli")]),t._v(", one can check the staking stake of a "),a("em",[t._v("Staking")]),t._v(" type address and obtain the following:")],1),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##### EXAMPLE: Staking state #####")]),t._v("\n+-----------------+----------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Nonce           "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+-----------------+----------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Bonded          "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000000.00000000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+-----------------+----------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Unbonded        "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("              "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000.00000000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+-----------------+----------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Unbonded From   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v("-02-02 08:28:16 +08:00 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+-----------------+----------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Jailed Until    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                 Not jailed "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+-----------------+----------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Punishment Type "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("               Not punished "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+-----------------+----------------------------+\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" Slash Amount    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("               Not punished "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("\n+-----------------+----------------------------+\n")])])]),a("ul",[a("li",[a("p",[t._v("The "),a("code",[t._v("Nonce")]),t._v(" is the number of transactions that have the witness of the staking address.")])]),t._v(" "),a("li",[a("p",[t._v("The "),a("code",[t._v("Bonded")]),t._v(" amount is the amount used to check against minimal staking requirements and used to calculate the Tendermint validator voting power (in case of council nodes).")]),t._v(" "),a("p",[t._v("As it may take time for the network evidence of malicious activity (e.g. double signing) to appear, the stake cannot be withdrawn immediately and is first moved to the “unbonded” balance.")])]),t._v(" "),a("li",[a("p",[t._v("The "),a("code",[t._v("Unbonded")]),t._v(" balance can be withdrawn (into transaction outputs) after "),a("code",[t._v("Unbonded From")]),t._v(" time if the account was not jailed / slashed (see "),a("a",{attrs:{href:"./staking"}},[t._v("staking")]),t._v(").")])]),t._v(" "),a("li",[a("p",[t._v("For slashing related information:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("Jailed Until")]),t._v(" is the time until which current account is jailed;")]),t._v(" "),a("li",[a("code",[t._v("Punishment Type")]),t._v(" represents the type of "),a("RouterLink",{attrs:{to:"/getting-started/reward-and-punishments.html#validator-punishments"}},[t._v("punishment")]),t._v(" that will be imposed on the account (if any);")],1),t._v(" "),a("li",[a("code",[t._v("Slash Amount")]),t._v(" is the amount of penalty.")])])])]),t._v(" "),a("h3",{attrs:{id:"staked-state-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#staked-state-storage"}},[t._v("#")]),t._v(" Staked State Storage")]),t._v(" "),a("p",[t._v("The account state is currently stored in a sparse Merkle trie structure (currently MerkleBIT backed by RocksDB, but it may be migrated to a more robust / better understood structure, e.g. a Patricia Merkle trie or IAVL+).")])])}),[],!1,null,null,null);e.default=n.exports}}]);